
# TCP/IP 쉽게, 더 쉽게

가볍게 보고 있는데 생각보다 재밌어서 간단히 기록까지.

# CH3. 트랜스포트 계층

- 인터넷 계층이 컴퓨터까지 데이터를 전달했다면,
- 트랜스포트 계층은 컴퓨터로 들어온 데이터를 애플리케이션 계층으로 전달.
- 이 때 애플리케이션 식별은 포트 번호로.
- 포트 번호를 웰노운, 레지스터드, 다이나믹으로 나누어 설명.
- TCP의 경우 데이터 전송의 신뢰성을 위해,
- 데이터를 세그먼트 단위로 분할하고 전송 속도를 조정하며 필요시 재전송도.
- TCP 세그먼트는 데이터 본체에 더해 TCP 헤더가 붙음.
- 송신지 포트 번호, 수신지 포트 번호, 일련번호, 확인 응답 번호, 컨트롤 비트 등이 헤더에 포함.
- 커넥션을 맺는 과정은 3-way 핸드쉐이크이며 순서는 SYN(C) - ACK/SYN(S) - ACK(C)).
- 커넥션을 끊을 때는 FIN(C) - ACK(S) - FIN(S) - ACK(C).

![TCP 커넥션 다이어그램](https://farm1.staticflickr.com/440/18338404268_f693b065d4_o.png)

- 데이터 전송 과정에서 일련번호와 확인 응답 번호가 어떻게 바뀌는지도 소개.
- `일련번호의 최종값 - 1`은 송신 바이트 수이고 `확인 응답 번호 - 1`은 수신한 바이트 수.
- 응답을 기다리는 대신 연속으로 데이터를 몰아서 보내고 응답도 몰아서 받는 식으로 속도를 높이기도.
- 이렇게 연속으로 데이터를 주고 받을 때, TCP 헤더인 윈도우 사이즈에 가용한 버퍼를 송신 측에 통보.
- 이 버퍼에 맞게 송신 측은 흐름 제어를 하며 요청량을 조절함.
- 한편, UDP는 이런 별다른 처리가 없는 대신 빠름.
- 더불어 브로드캐스트와 멀티캐스트도 가능.
- 때로는 UDP에 부족한 흐름 제어나 혼잡 제어 기능을 애플리케이션 차원에서 구현하기도.
