# Fundamentals of Software Architecture

- 시작부터 아키텍트 정의가 나와 거부감이 들었으나,
- 중간중간 생각해 볼만한 내용들이 나와 기록하면서 읽어보기로.

# CH1. 서론

## 비즈니스 도메인 지식을 보유한다

- 도메인 지식이 없으면 문제점, 목표, 요구사항 이해가 어려움.
- 따라서 요구사항을 수용하는 효율적 아키텍처 설계도 X.
- 금융 기관에서 일하는데 평균 방향성 지수, 사행 계약, 무순위 채무 같은 평범한 금융 용어를 모른다면.
- 도메인 지식이 있어야 여러 이해관계자와 효과적으로 소통.

## 대인 관계 기술이 뛰어나다

> 그들이 당신에게 뭐라고 말하든 항상 사람이 문제입니다

- 팀워크, 조정, 리더십 등의 대인관계 기술 역시 중요.
- 여러 이유가 있지만 적어도 아키텍처 결정 배경을 효과적으로 설명하고 전달할 수 있어야 하기에.

## 정치를 이해하고 처세를 잘한다

- 회사 내부의 정치적 분위기를 이해하고 적절히 처신할 줄 알아야.
- 예컨대, 어떤 아키텍처 결정을 내리면 사람들의 반발을 사기 마련이며,
- 이 때 사람들이 변화를 잘 수용할 수 있도록 협상 기술을 잘 발휘해야(혹은 반대에 부딪히며 나아가야).

# CH2. 아키텍처 사고

아키텍트에게 필요한 사고들에 대해 이야기.

## 아키텍처 대 설계

- 사실은 개발팀과 어떻게 협력해야 하는지에 대한 이야기.
- 여기서 아키텍처는 아키텍트가 다루는 것이고 설계는 개발자가 다루는 것을 구분짓는 용도로 사용됨.
- 아키텍트는 전통적 방식이, 아니라 개발자와 아키텍트를 가르는 가상의 물리적 장벽을 허물고, 서로 끊임 없이 소통하는 관계를 정립해야 함.
- 상황이 계속 변하고 이에 대응하고자 이터레이션 방식으로 개발도 하기 때문.

## 기술 폭

- 개발자는 A를 늘려가며 기술의 깊이를 쌓아야 하고,
- 아키텍트는 B를 넓혀 기술 폭을 늘려야 함.
- 한 가지 해결 방식을 자세히 알고 있기 보다,
- 문제 해결에 필요한 5가지 솔루션을 알고,
- 주어진 제약과 목적에 따라 올바른 선택을 할 수 있어야 함.

```
       /\
      /  \
     / A  \
    /------\
   /   B    \
  /----------\
 /     C      \
/______________\

A: 내가 알고 있는 것
B: 내가 모른다는 사실을 아는 것
C: 내가 모른다는 사실조차 모르는 것
```

## 트레이드오프 분석

> 아키텍처는 구글링해도 안 되는 것이다

- 배포 환경, 비즈니스 동인, 회사 문화, 예산, 기간, 개발자 스킬 세트 등 각자에게 주어진 상황은 다 다름.
- 이런 개별 환경, 상황, 문제에 따라 트레이드오프가 다르며 따라서 해결책도 다름.
- 구글링을 통해 정답을 알 수 없는 이유임.
- 그리고 어떤 해결책에서 단점을 발견하지 못한다면 좀 더 분석이 필요한 한 가지 지표.
- 예컨대 아래 그림에서 언뜻 보기에 topic 활용한 방식이 좋아 보임.

```
# 토픽을 이용한 서비스 간 통신
bid producer ------> 매물 topic -----> bid capture
                           | ∟-----> bid tracking
                           ㄴ-------> bid analytics

# 큐를 이용한 서비스 간 통신
bid producer -----> 매물 queue -----> bid capture
       | ㄴ-------> 매물 queue ------> bid tracking
       ㄴ---------> 매물 queue ------> bid analytics
```

- 일단 토픽 방식은 확장성에 유리.
- 새로운 이력 서비스가 필요하더라도 bid producer에 변경은 필요 없음.
- bid history 서비스가 토픽을 새로 구독하기만 하면 됨.
- 이는 bid producer가 구독 서비스가 뭐가 있는지 몰라도 되는 디커플링이기도.

> 프로그래머는 장점을 잘 알지만 트레이드오프는 하나도 모른다.

- 하지만 토픽 방식에서는 누구나 입찰 데이터에 액세스 할 수 있어 보안 측면에 문제가 될 수 있음.
- 또한 토픽에서는 한 가지 데이터 계약만 지원하므로 어느 한 서비스에서 추가 데이터가 필요하면 나머지 모든 서비스도 함께 영향 받음.
- 더불어 토픽의 메시지 개수 모니터링과 오토 스케일링 제약도 존재.
- 그 외에도 주어진 상황에 따라 여러 장단점 도출 될 수 있음.

## 비즈니스 동인의 이해

- 비즈니스 동인을 이해하고,
- 요구사항을 아키텍처 특성으로 해석하고 번역함.
- 따라서 도메인 지식이 있어야 하며,
- 비즈니스 이해 관계자들과 원만하고 협력적 관계를 유지해야 함.
