# Software Architecture: The Hard Parts

[Fundamentals of Software Architecture](../fosa/README.md) 책의 심화편이라 함.

## CH3. 아키텍처 모듈성

- 지어낸 이야기 소개로 시작.
- 애플리케이션에 이슈와 장애가 잦고, 이것 저것 땜빵을 하지만, 결국 사업부 폐지 위기.
- 개발자들은 갖은 땜빵질을 해도 문제가 게속되니 결국 시스템을 잘게 쪼개야 한다고 생각.
- 하지만 어떻게 경영진을 설득해야 하나 고민하다 역량있는 선배를 찾아가 조언을 구함.
- 조언자는 애플리케이션 분해가 어떻게 문제 해결로 이어지냐 질문.
- 개발자들은 대답 못함.

> 진로 수정이 필요할 때마다 과감하고 신속하게 결단을 내려 효과적으로 밀어붙이는 능력이야말로 승자와 패자를 가르는 요인 중 하나입니다.

- 요즘 세상에서 기업은 기민해야 함.
- 어느 정도 이상의 아키텍처 민첩성은 필수.
- 유지보수성, 시험성, 배포성, 확장성, 가용성/내고장성이 필요.
- 모듈화가 이를 도움.

### 3.1 모듈화 동인

- 명확한 비즈니스 동인 없이 시스템을 더 잘게 나누면 X.
- 시장 출시 속도와 시장에서의 경쟁 우위 확보여야 함.
- 이를 위한 5가지 핵심 아키텍처 특성은,
- 가용성(내고장성), 확장성, 배포성, 시험성, 유지 보수성.
- 여기서의 모듈화는 분산 아키텍처만을 의미하는 것은 아님.
- modular monolith나 microkernel architecture 같은 모놀리식도 방법.

#### 3.1.1 유지 보수성

- 기능의 추가/변경/삭제에 더해,
- 패치, 프레임워크 업그레이드, 서드파티 업데이트 등의 내부적 변경까지를,
- 얼마나 쉽게 할 수 있는지 나타내는 특성.
- 애플리케이션의 상대적 유지 보수성을 측정하는 5가지 메트릭 언급.
  - 컴포넌트 결합도.
  - 컴포넌트 응집도.
  - 순환 복잡도: 컴포넌트 내부의 전체적인 간접 참조 및 중첩 정도.
  - 컴포넌트 사이즈: 컴포넌트 내부에 구현된 코드의 전체 문장 수.
  - 기술 분할 대 도메인 분할: 컴포넌트를 나누는 기준이 기술적 용도인가 도메인 목적인가.
- 과거의 레이어 아키텍처인 DB > 퍼시스턴스 > 비즈니스 > 프리젠테이션 레이어에서는,
- 고객 위시리스트 항목에 만료일자를 추가하면 변경된 코드가 모든 레이어에 전파.
- 사소한 변경일지라도 여러 팀의 조율(UI 화면 추가, 백엔드 개발, DB 스키마)이 필요할 수도 있음.
- 하지만 모듈화된 아키텍처에서는 그 범위가 도메인 관련부로 국소화(여기서는 UI도 몇 개로 나눠짐).

#### 3.1.2 시험성

- 아키텍처 민첩성을 위한 필수 성분.
- 테스트의 완전성과 용이함을 의미.
- 규모 큰 모놀리식에서 완벽한 회귀 테스트는 상대적으로 어려움.
- 완전히 한다고 하더라도, 사소한 변경으로 수백 수천 개의 단위 테스트는 얼마나 번거로운가?
- 더 작은 배포 단위에서는 변경에 의한 전체 테스트 범위가 줄어들며 완전한 테스팅도 좀 더 수월.
- 목적에 특화된 테스트 스위트 작성도 가능.
